services:
  app:
    image: streamlit-multiagent-app
    build:
      context: .
      dockerfile: Dockerfile
    container_name: streamlit_agent_app

    # ADD THIS SECTION:
    ports:
      - "8501:8501"  # Maps [Host Port]:[Container Port]
    environment:
      - STREAMLIT_SERVER_RUN_ON_SAVE=true
      - PYTHONUNBUFFERED=1
      - LITELLM_LOG=ERROR
      - DISABLE_AUTO_LOGGING=True

    env_file:
      - .env

    volumes:
      - .:/app

    develop:
      watch:
        - action: sync
          path: .
          target: /app
          ignore:
            - __pycache__/
            - .env
            - .venv/
        - action: rebuild
          path: Dockerfile
        - action: rebuild
          path: requirements.txt

networks:
  default:
    name: streamlit_network